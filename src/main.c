#include <stm32f031x6.h>
#include "display.h"
#include "sound.h"
#include "musical_notes.h"
#include "serial.h"

// Symbolic Names for screen size
#define SCREEN_WIDTH 128
#define SCREEN_HEIGHT 160

void initClock(void);
void initSysTick(void);
void SysTick_Handler(void);
void delay(volatile uint32_t dly);
void setupIO();
int isInside(uint16_t x1, uint16_t y1, uint16_t w, uint16_t h, uint16_t px, uint16_t py);
void enablePullUp(GPIO_TypeDef *Port, uint32_t BitNumber);
void pinMode(GPIO_TypeDef *Port, uint32_t BitNumber, uint32_t Mode);
volatile uint32_t milliseconds;

// Functions to turn on lights and off
void lightOneOn(void);
void lightTwoOn(void);
void lightThreeOn(void);

void lightOneOff(void);
void lightTwoOff(void);
void lightThreeOff(void);

void victoryFlash(void);

// Function to display start screen
void main_menu(void);

// Function for start button
int startButtonPressed();

// Function to play sound in background
void playTune(uint32_t * the_notes, uint32_t * the_times, int length, int repeat);

// Functions for border collision
int touchingVLine(int lx, int ly, int lh, int px, int py, int pw, int ph);
int touchingHLine(int lx, int ly, int lw, int px, int py, int pw, int ph);

// Functions to set display for each level
void maze_level1(void);
void maze_level2(void); 
void maze_level3(void);

// These functions pass oldx, oldy, and the level number and return the new level number
void level1_pass(uint16_t,uint16_t); // Function for when the player passes level 1
void level2_pass(uint16_t,uint16_t); // Function for when the player passes level 2
void level3_pass(uint16_t,uint16_t); // Function for when the player passes final level

// Function for handling movement for level 1
void movement1(int,int,int,int,int,uint16_t,uint16_t,uint16_t,uint16_t);

// Mouse and Cheese Sprites
const uint16_t mouse1green[]=
{
	32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,0,0,0,32776,0,0,32776,32776,32776,32776,32776,32776,32776,32776,32776,0,16383,16383,65535,0,61307,61307,0,32776,32776,32776,32776,32776,32776,32776,32776,0,16383,16383,65535,0,61307,61307,0,32776,32776,32776,0,32776,32776,32776,32776,0,16383,16383,29861,29861,29861,29861,29861,0,32776,0,16383,0,32776,32776,32776,0,0,16383,16383,29861,58640,29861,58640,0,32776,32776,0,16383,0,0,0,61307,61307,61307,29861,29861,29861,29861,29861,64923,0,32776,32776,0,16383,16383,61307,61307,61307,61307,61307,29861,29861,16383,16383,0,32776,32776,32776,32776,0,0,61307,61307,61307,61307,61307,61307,61307,61307,0,32776,32776,32776,32776,32776,32776,32776,0,0,61307,0,0,0,61307,61307,0,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,
};
const uint16_t mouse2green[]= 
{
	32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,0,0,0,32776,0,0,32776,32776,32776,32776,32776,32776,32776,32776,32776,0,63668,63668,29861,0,61307,61307,0,32776,32776,32776,32776,32776,32776,32776,32776,0,63668,63668,29861,29861,29861,29861,29861,0,32776,32776,32776,32776,32776,32776,32776,32776,0,63668,63668,29861,58640,29861,58640,0,32776,32776,32776,32776,32776,32776,32776,0,61307,61307,29861,29861,29861,29861,29861,0,32776,32776,32776,32776,0,0,0,61307,61307,61307,61307,29861,29861,63668,63668,64923,0,32776,32776,0,63668,63668,61307,61307,61307,61307,61307,61307,61307,61307,0,0,32776,32776,0,63668,0,0,61307,61307,61307,0,0,61307,61307,0,32776,32776,32776,0,63668,0,32776,32776,0,61307,0,32776,32776,32776,32776,32776,32776,32776,32776,32776,0,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,
};
const uint16_t mouse3green[]=
{
	32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,0,0,0,32776,0,0,32776,32776,32776,32776,0,32776,32776,32776,32776,0,63668,63668,29861,0,61307,61307,0,32776,32776,0,63668,0,32776,32776,32776,0,63668,63668,29861,0,61307,61307,0,32776,32776,32776,0,63668,0,0,0,0,63668,63668,29861,29861,29861,29861,29861,0,32776,32776,32776,0,63668,63668,61307,0,0,63668,63668,29861,58640,29861,58640,64923,0,32776,32776,32776,0,0,61307,61307,61307,61307,29861,29861,29861,29861,29861,0,32776,32776,32776,32776,32776,32776,0,61307,61307,61307,61307,29861,29861,63668,63668,0,32776,32776,32776,32776,32776,32776,0,61307,0,0,61307,61307,61307,61307,0,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,0,0,61307,61307,0,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,
};
const uint16_t mousedown1green[]= 
{
	32776,32776,32776,32776,32776,32776,32776,32776,32776,0,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,0,16383,0,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,0,16383,0,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,0,0,16383,0,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,0,29861,29861,29861,29861,0,32776,32776,32776,32776,32776,32776,32776,32776,32776,0,61307,29861,29861,29861,29861,61307,0,32776,32776,32776,32776,32776,32776,32776,32776,0,29861,29861,61307,29861,29861,29861,0,32776,32776,32776,32776,32776,32776,32776,32776,0,29861,61307,61307,29861,61307,61307,0,32776,32776,32776,32776,32776,32776,32776,32776,32776,0,0,29861,61307,0,0,32776,32776,32776,32776,32776,32776,32776,32776,32776,0,27747,4228,0,0,27747,4228,0,32776,32776,32776,32776,32776,32776,32776,0,4228,27747,27747,27747,27747,27747,27747,27747,0,32776,32776,32776,32776,32776,32776,32776,0,29861,58640,29861,29861,58640,29861,0,32776,32776,32776,32776,32776,32776,32776,32776,0,29861,58640,29861,29861,58640,29861,0,32776,32776,32776,32776,32776,32776,32776,32776,32776,0,29861,29861,29861,29861,0,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,0,64923,64923,0,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,0,0,32776,32776,32776,32776,32776,32776,32776,
};
const uint16_t mousedown2green[]= 
{
	32776,32776,32776,32776,32776,32776,0,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,0,16383,0,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,0,16383,0,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,0,16383,0,0,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,0,29861,29861,29861,29861,0,32776,32776,32776,32776,32776,32776,32776,32776,32776,0,61307,29861,29861,29861,29861,61307,0,32776,32776,32776,32776,32776,32776,32776,32776,0,29861,29861,61307,29861,29861,29861,0,32776,32776,32776,32776,32776,32776,32776,32776,0,29861,61307,61307,29861,61307,61307,0,32776,32776,32776,32776,32776,32776,32776,32776,32776,0,0,29861,61307,0,0,32776,32776,32776,32776,32776,32776,32776,32776,32776,0,27747,4228,0,0,27747,4228,0,32776,32776,32776,32776,32776,32776,32776,0,4228,27747,27747,27747,27747,27747,27747,27747,0,32776,32776,32776,32776,32776,32776,32776,0,29861,58640,29861,29861,58640,29861,0,32776,32776,32776,32776,32776,32776,32776,32776,0,29861,58640,29861,29861,58640,29861,0,32776,32776,32776,32776,32776,32776,32776,32776,32776,0,29861,29861,29861,29861,0,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,0,64923,64923,0,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,0,0,32776,32776,32776,32776,32776,32776,32776,
};
const uint16_t cheese[]=
{
	58368,58368,58368,58368,58368,58368,58368,58368,0,0,0,58368,58368,58368,58368,58368,58368,58368,58368,58368,58368,0,0,65391,65391,65391,0,58368,58368,58368,58368,58368,58368,58368,0,0,65391,65391,65391,65315,65315,65391,0,58368,58368,58368,58368,0,0,65391,65391,65391,65391,65391,65391,65391,65391,65391,0,58368,58368,0,65391,65315,65391,65315,65315,65391,65391,65391,65315,29722,65391,65391,0,0,65391,65391,65391,65391,65315,29722,65391,65391,65391,65391,65391,65391,65391,0,0,0,0,0,0,0,65315,0,0,13322,13322,13322,65324,0,0,0,65391,65391,65391,65391,65324,65324,65324,65324,65315,13322,65324,65324,65324,0,0,65391,65315,65391,65391,65324,65324,65324,65324,65315,13322,13322,65315,65315,0,0,65391,65391,65391,65391,65324,65315,65315,65324,65324,13322,13322,65315,65315,0,58368,0,65391,65391,65391,65324,65315,65315,65324,65324,13322,13322,13322,13322,0,58368,0,65315,29722,65391,65324,65324,65324,65324,65324,13322,29722,65315,13322,0,0,65391,65315,65315,65391,65324,65324,65324,65324,65324,13322,65315,65315,13322,0,0,65391,65391,65391,65391,65324,65324,65324,65324,0,0,0,13322,13322,0,58368,0,0,0,0,0,0,0,0,58368,58368,58368,0,0,58368,
};
const uint16_t vic_mouse0[]= 
{
	0,0,16648,16648,16648,16648,0,0,0,0,0,0,0,0,16648,16648,16648,16648,0,0,0,16648,61307,61307,61307,61307,16648,0,0,0,0,0,0,16648,61307,61307,61307,61307,16648,0,16648,61307,61307,57293,16648,61307,61307,16648,16648,16648,16648,16648,16648,61307,61307,16648,57293,61307,61307,16648,16648,61307,57293,57293,57293,16648,61307,61307,61307,61307,61307,61307,61307,16648,16648,57293,57293,57293,61307,16648,16648,61307,57293,57293,57293,16648,61307,61307,61307,61307,61307,61307,61307,61307,61307,57293,57293,57293,61307,16648,16648,61307,57293,57293,57293,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,57293,57293,57293,61307,16648,0,16648,61307,61307,61307,61307,16648,16648,61307,61307,61307,61307,16648,16648,61307,61307,61307,61307,16648,0,0,0,16648,16648,61307,61307,16648,16648,61307,61307,61307,61307,16648,16648,61307,61307,16648,16648,0,0,0,0,0,16648,61307,61307,61307,61307,61307,16648,16648,61307,61307,61307,61307,61307,16648,0,0,0,0,0,0,16648,61307,61307,61307,61307,16648,57293,57293,16648,61307,61307,61307,61307,16648,0,0,0,0,0,0,16648,61307,61307,61307,61307,16648,57293,57293,16648,61307,61307,61307,61307,16648,0,0,0,0,0,0,16648,16648,61307,61307,61307,61307,16648,16648,61307,61307,61307,61307,16648,16648,0,0,0,0,0,0,0,16648,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,16648,0,0,16648,0,0,0,0,16648,16648,16648,61307,61307,37892,37892,37892,37892,61307,61307,16648,16648,16648,16648,57293,16648,0,0,0,16648,61307,16648,16648,37892,24327,24327,24327,24327,37892,16648,16648,61307,16648,57293,16648,0,0,0,0,16648,61307,61307,61307,16648,24327,37892,24327,24327,16648,61307,61307,61307,16648,57293,16648,0,0,0,16648,61307,61307,61307,61307,57293,24327,24327,24327,37892,57293,61307,61307,61307,61307,16648,57293,16648,0,0,16648,61307,16648,61307,61307,16648,37892,24327,24327,24327,16648,61307,61307,16648,61307,16648,57293,16648,0,0,16648,61307,61307,16648,16648,37892,24327,24327,37892,24327,24327,16648,16648,61307,61307,16648,57293,16648,0,0,16648,61307,61307,61307,61307,61307,37892,37892,24327,24327,37892,61307,61307,61307,61307,57293,57293,16648,0,0,16648,61307,61307,61307,61307,61307,61307,61307,37892,37892,61307,61307,61307,61307,61307,57293,16648,0,0,0,16648,16648,61307,16648,16648,16648,61307,61307,61307,61307,61307,16648,16648,16648,61307,16648,0,0,0,0,0,0,16648,57293,57293,57293,16648,16648,16648,16648,16648,57293,57293,57293,16648,0,0,0,0,0,0,0,0,16648,16648,16648,0,0,0,0,0,16648,16648,16648,0,0,0,0,
};
const uint16_t vic_mouse1[]= 
{
	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16648,16648,16648,16648,0,0,0,0,0,0,0,0,16648,16648,16648,16648,0,0,0,16648,61307,61307,61307,61307,16648,0,0,0,0,0,0,16648,61307,61307,61307,61307,16648,0,16648,61307,61307,16648,16648,61307,61307,16648,16648,16648,16648,16648,16648,61307,61307,16648,57293,57293,61307,16648,16648,61307,57293,57293,57293,16648,61307,61307,61307,61307,61307,61307,61307,61307,16648,57293,57293,57293,61307,16648,16648,61307,57293,57293,57293,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,57293,57293,57293,61307,16648,0,61307,57293,57293,57293,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,57293,57293,57293,61307,0,0,0,61307,61307,61307,61307,16648,16648,61307,61307,61307,61307,16648,16648,61307,61307,61307,61307,0,0,0,0,0,16648,61307,61307,61307,61307,61307,16648,16648,61307,61307,61307,61307,61307,61307,0,0,0,0,0,0,16648,61307,61307,24327,61307,16648,57293,57293,16648,61307,37892,61307,61307,16648,0,0,0,0,0,0,16648,61307,61307,61307,61307,16648,57293,57293,16648,61307,61307,37892,61307,16648,0,0,0,0,0,0,0,16648,61307,61307,37892,24327,16648,16648,24327,37892,61307,61307,16648,0,0,0,0,0,0,0,0,0,16648,16648,24327,24327,24327,24327,37892,37892,16648,16648,0,0,0,16648,0,0,0,0,0,16648,61307,61307,0,24327,24327,37892,24327,0,61307,61307,16648,0,16648,57293,16648,0,0,0,16648,61307,61307,61307,57293,37892,24327,24327,24327,57293,61307,61307,61307,16648,57293,16648,0,0,0,0,16648,61307,61307,61307,0,24327,24327,24327,24327,0,61307,61307,61307,16648,57293,16648,0,0,0,16648,61307,61307,0,0,37892,24327,37892,24327,37892,37892,0,0,61307,61307,16648,57293,16648,0,0,16648,61307,16648,61307,61307,61307,37892,37892,37892,61307,61307,61307,61307,16648,61307,16648,57293,16648,0,0,16648,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,16648,57293,16648,0,0,16648,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,57293,57293,16648,0,0,16648,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,57293,16648,0,0,0,0,16648,61307,16648,16648,16648,61307,61307,61307,61307,61307,16648,16648,16648,61307,16648,0,0,0,0,0,0,16648,57293,57293,57293,16648,16648,16648,16648,16648,57293,57293,57293,16648,0,0,0,0,0,0,0,0,16648,16648,16648,0,0,0,0,0,16648,16648,16648,0,0,0,0,
};
const uint16_t vic_mouse2[]= 
{
	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16648,16648,16648,16648,0,0,0,0,0,0,0,0,16648,16648,16648,16648,0,0,0,16648,61307,61307,61307,61307,16648,0,0,0,0,0,0,16648,61307,61307,61307,61307,16648,0,16648,61307,61307,16648,16648,61307,61307,16648,16648,16648,16648,16648,16648,61307,61307,16648,57293,57293,61307,16648,16648,61307,57293,57293,57293,16648,61307,61307,61307,61307,61307,61307,61307,61307,16648,57293,57293,57293,61307,16648,16648,61307,57293,57293,57293,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,57293,57293,57293,61307,16648,0,61307,57293,57293,57293,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,57293,57293,57293,61307,0,0,0,61307,61307,61307,61307,16648,16648,61307,61307,61307,61307,16648,16648,61307,61307,61307,61307,0,0,0,0,0,16648,61307,61307,61307,61307,61307,16648,16648,61307,61307,61307,61307,61307,61307,0,0,0,0,0,0,16648,61307,61307,61307,61307,16648,57293,57293,16648,61307,24327,61307,61307,16648,0,0,0,0,0,0,16648,61307,61307,61307,61307,16648,57293,57293,16648,61307,61307,61307,61307,16648,0,0,0,0,0,0,0,16648,0,0,37892,61307,16648,16648,61307,61307,16648,16648,16648,0,0,0,0,0,0,0,0,0,61307,61307,0,61307,24327,37892,37892,16648,61307,61307,0,0,0,16648,0,0,0,0,0,16648,61307,61307,57293,37892,24327,24327,24327,57293,61307,61307,16648,0,16648,57293,16648,0,0,0,16648,61307,61307,61307,0,37892,37892,24327,37892,16648,61307,61307,61307,16648,57293,16648,0,0,0,0,16648,61307,0,0,61307,61307,61307,37892,37892,61307,16648,16648,61307,16648,57293,16648,0,0,0,16648,61307,0,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,16648,61307,16648,57293,16648,0,0,16648,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,16648,57293,16648,0,0,16648,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,16648,57293,16648,0,0,16648,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,57293,57293,16648,0,0,16648,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,57293,16648,0,0,0,0,16648,61307,16648,16648,16648,61307,61307,61307,61307,61307,16648,16648,16648,61307,16648,0,0,0,0,0,0,16648,57293,57293,57293,16648,16648,16648,16648,16648,57293,57293,57293,16648,0,0,0,0,0,0,0,0,16648,16648,16648,0,0,0,0,0,16648,16648,16648,0,0,0,0,
};
const uint16_t vic_mouse3[]= 
{
	0,0,16648,16648,16648,16648,0,0,0,0,0,0,0,0,16648,16648,16648,16648,0,0,0,16648,61307,61307,61307,61307,16648,0,0,0,0,0,0,16648,61307,61307,61307,61307,16648,0,16648,61307,61307,57293,16648,61307,61307,16648,16648,16648,16648,16648,16648,61307,61307,16648,57293,61307,61307,16648,16648,61307,57293,57293,57293,16648,61307,61307,61307,61307,61307,61307,61307,16648,16648,57293,57293,57293,61307,16648,16648,61307,57293,57293,57293,16648,61307,61307,61307,61307,61307,61307,61307,61307,61307,57293,57293,57293,61307,16648,16648,61307,57293,57293,57293,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,57293,57293,57293,61307,16648,0,16648,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,16648,0,0,0,16648,16648,61307,61307,16648,16648,61307,61307,61307,61307,16648,16648,61307,61307,16648,16648,0,0,0,0,0,16648,61307,61307,61307,61307,61307,16648,16648,61307,61307,61307,61307,61307,16648,0,0,0,0,0,0,16648,61307,61307,61307,61307,16648,57293,57293,16648,61307,61307,61307,61307,16648,0,0,0,0,0,0,16648,61307,61307,16648,61307,16648,57293,57293,16648,61307,16648,61307,61307,16648,0,0,0,0,0,0,16648,16648,61307,61307,16648,16648,16648,16648,16648,16648,61307,61307,16648,16648,0,0,0,0,0,0,0,16648,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,16648,0,0,16648,0,0,0,0,16648,16648,16648,61307,61307,61307,61307,61307,61307,61307,61307,16648,16648,16648,16648,57293,16648,0,0,0,16648,61307,16648,16648,61307,61307,61307,61307,61307,61307,16648,16648,61307,16648,57293,16648,0,0,0,0,16648,61307,61307,61307,16648,61307,61307,61307,61307,16648,61307,61307,61307,16648,57293,16648,0,0,0,16648,61307,61307,61307,61307,57293,61307,61307,61307,61307,57293,61307,61307,61307,61307,16648,57293,16648,0,0,16648,61307,16648,61307,61307,16648,61307,61307,61307,61307,16648,61307,61307,16648,61307,16648,57293,16648,0,0,16648,61307,61307,16648,16648,61307,61307,61307,61307,61307,61307,16648,16648,61307,61307,16648,57293,16648,0,0,16648,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,57293,57293,16648,0,0,16648,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,61307,57293,16648,0,0,0,16648,16648,61307,16648,16648,16648,61307,61307,61307,61307,61307,16648,16648,16648,61307,16648,0,0,0,0,0,0,16648,57293,57293,57293,16648,16648,16648,16648,16648,57293,57293,57293,16648,0,0,0,0,0,0,0,0,16648,16648,16648,0,0,0,0,0,16648,16648,16648,0,0,0,0,
};
const uint16_t banner[]= 
{
	0,0,0,0,24327,24327,24327,24327,24327,0,0,0,24327,24327,0,0,0,0,0,0,24327,24327,0,0,24327,24327,24327,24327,24327,24327,24327,24327,24327,0,0,24327,24327,24327,24327,24327,24327,24327,24327,24327,0,0,0,0,0,0,0,0,24327,24327,24327,24327,24327,0,0,24327,24327,24327,24327,24327,24327,24327,24327,24327,0,0,0,24327,24327,24327,16142,16142,16142,16142,0,0,0,24327,24327,0,0,0,0,0,0,24327,24327,0,0,16142,24327,24327,16142,16142,16142,16142,16142,16142,0,0,16142,24327,24327,16142,16142,16142,16142,16142,16142,0,0,0,0,0,0,24327,24327,24327,16142,16142,16142,16142,0,0,16142,24327,24327,16142,16142,16142,16142,16142,16142,0,0,24327,24327,16142,16142,0,0,0,0,0,0,0,24327,24327,0,0,0,0,0,0,24327,24327,0,0,0,24327,24327,0,0,0,0,0,0,0,0,0,24327,24327,0,0,0,0,0,0,0,0,0,0,0,24327,24327,16142,16142,0,0,0,0,0,0,0,24327,24327,0,0,0,0,0,0,0,24327,24327,16142,0,0,0,0,0,0,0,0,0,24327,24327,24327,24327,24327,24327,24327,24327,24327,24327,0,0,0,24327,24327,24327,24327,24327,24327,24327,0,0,0,0,24327,24327,24327,24327,24327,24327,24327,0,0,0,0,0,0,24327,24327,0,0,0,0,0,0,0,0,0,24327,24327,24327,24327,24327,24327,24327,0,0,24327,24327,0,0,0,0,0,0,0,0,0,0,24327,24327,16142,16142,16142,16142,16142,16142,24327,24327,0,0,0,24327,24327,16142,16142,16142,16142,16142,0,0,0,0,24327,24327,16142,16142,16142,16142,16142,0,0,0,0,0,0,16142,24327,24327,24327,24327,24327,24327,24327,0,0,0,24327,24327,16142,16142,16142,16142,16142,0,0,24327,24327,0,0,0,0,0,0,0,0,0,0,24327,24327,0,0,0,0,0,0,24327,24327,0,0,0,24327,24327,0,0,0,0,0,0,0,0,0,24327,24327,0,0,0,0,0,0,0,0,0,0,0,0,16142,16142,16142,16142,16142,24327,24327,24327,0,0,24327,24327,0,0,0,0,0,0,0,24327,24327,0,0,0,0,0,0,0,0,0,0,24327,24327,0,0,0,0,0,0,24327,24327,0,0,0,24327,24327,0,0,0,0,0,0,0,0,0,24327,24327,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16142,24327,24327,0,0,24327,24327,0,0,0,0,0,0,0,24327,24327,0,0,0,0,0,0,0,0,0,0,24327,24327,0,0,0,0,0,0,24327,24327,0,0,0,24327,24327,0,0,0,0,0,0,0,0,0,24327,24327,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24327,24327,0,0,24327,24327,0,0,0,0,0,0,0,24327,24327,0,0,0,0,0,0,0,0,0,0,24327,24327,0,0,0,0,0,0,24327,24327,0,0,0,24327,24327,0,0,0,0,0,0,0,0,0,24327,24327,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24327,24327,0,0,24327,24327,0,0,0,0,0,0,0,16142,24327,24327,0,0,0,0,0,24327,24327,0,0,24327,24327,0,0,0,0,0,0,24327,24327,0,0,0,24327,24327,0,0,0,0,0,0,0,0,0,24327,24327,0,0,0,0,0,0,0,0,0,24327,24327,0,0,0,0,0,0,0,24327,24327,0,0,24327,24327,0,0,0,0,0,0,0,0,16142,24327,24327,24327,24327,24327,24327,24327,16142,0,0,24327,24327,0,0,0,0,0,0,24327,24327,0,0,0,24327,24327,0,0,0,0,0,0,0,0,0,24327,24327,0,0,0,0,0,0,0,0,0,24327,24327,0,0,0,0,0,0,24327,24327,16142,0,0,24327,24327,0,0,0,0,0,0,0,0,0,16142,16142,16142,16142,16142,16142,16142,0,0,0,16142,16142,0,0,0,0,0,0,16142,16142,0,0,0,16142,24327,24327,24327,24327,24327,24327,24327,24327,0,0,16142,24327,24327,24327,24327,24327,24327,24327,24327,0,0,16142,24327,24327,24327,24327,24327,24327,24327,24327,16142,0,0,0,24327,24327,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16142,16142,16142,16142,16142,16142,16142,16142,0,0,0,16142,16142,16142,16142,16142,16142,16142,16142,0,0,0,16142,16142,16142,16142,16142,16142,16142,16142,0,0,0,0,16142,24327,24327,24327,24327,24327,24327,24327,24327,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16142,16142,16142,16142,16142,16142,16142,16142,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24327,24327,24327,24327,24327,24327,24327,0,0,0,0,0,0,24327,24327,0,0,0,24327,24327,0,0,24327,24327,0,0,0,0,0,24327,24327,0,0,0,24327,24327,0,0,24327,24327,0,0,24327,24327,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24327,24327,16142,16142,16142,24327,24327,0,0,0,0,0,24327,24327,16142,0,0,0,24327,24327,0,0,24327,24327,0,0,0,0,0,24327,24327,0,0,0,24327,24327,0,0,24327,24327,0,0,24327,24327,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24327,24327,0,0,0,24327,24327,0,0,0,0,24327,24327,16142,0,0,0,0,24327,24327,0,0,24327,24327,24327,0,0,0,0,24327,24327,0,0,0,24327,24327,0,0,24327,24327,0,0,24327,24327,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24327,24327,0,0,24327,24327,16142,0,0,0,0,24327,24327,0,0,0,0,0,24327,24327,0,0,24327,24327,24327,0,0,0,0,24327,24327,0,0,0,24327,24327,0,0,24327,24327,0,0,24327,24327,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24327,24327,24327,24327,24327,16142,0,0,0,0,0,24327,24327,0,0,0,0,0,24327,24327,0,0,24327,24327,24327,24327,0,0,0,24327,24327,0,0,0,24327,24327,0,0,24327,24327,0,0,24327,24327,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24327,24327,24327,24327,16142,0,0,0,0,0,24327,24327,16142,0,0,0,0,0,24327,24327,0,0,24327,24327,16142,24327,24327,0,0,24327,24327,0,0,0,24327,24327,0,0,24327,24327,0,0,24327,24327,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24327,24327,24327,24327,24327,0,0,0,0,0,24327,24327,0,0,0,0,0,0,24327,24327,0,0,24327,24327,0,16142,24327,24327,0,24327,24327,0,0,0,24327,24327,0,0,24327,24327,0,0,24327,24327,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24327,24327,16142,16142,24327,24327,0,0,0,0,24327,24327,0,0,0,0,0,0,24327,24327,0,0,24327,24327,0,0,16142,24327,24327,24327,24327,0,0,0,16142,16142,0,0,16142,16142,0,0,16142,16142,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24327,24327,0,0,24327,24327,0,0,0,0,24327,24327,0,0,0,0,0,24327,24327,24327,0,0,24327,24327,0,0,0,24327,24327,24327,24327,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24327,24327,0,0,16142,24327,24327,0,0,0,16142,24327,24327,0,0,0,24327,24327,24327,24327,0,0,24327,24327,0,0,0,16142,24327,24327,24327,0,0,0,24327,24327,0,0,24327,24327,0,0,24327,24327,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24327,24327,0,0,0,16142,24327,24327,0,0,0,24327,24327,24327,24327,24327,24327,16142,24327,24327,0,0,24327,24327,0,0,0,0,16142,24327,24327,0,0,0,24327,24327,0,0,24327,24327,0,0,24327,24327,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16142,16142,0,0,0,0,16142,16142,0,0,0,16142,16142,16142,16142,16142,16142,0,16142,16142,0,0,16142,16142,0,0,0,0,0,16142,16142,0,0,0,16142,16142,0,0,16142,16142,0,0,16142,16142,0,0,0,0,0,0,0,0,0,0,0,
};

// Explosion Sprites
const uint16_t poof0[]=
{
	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,65315,1024,3088,1544,0,0,0,0,0,0,0,0,0,1024,65315,5144,47648,29976,4368,2568,2056,0,0,0,0,0,0,24327,4112,4368,65315,40224,24327,65315,4368,65315,1280,2056,0,0,0,0,3856,4368,65315,40224,40224,65315,65315,29976,4368,3344,4368,0,0,0,0,4368,4368,65315,40224,16142,16142,16142,32032,65315,24327,0,0,0,0,0,4112,4368,32032,16142,24327,16142,24327,40224,32032,4368,0,0,0,0,0,2056,4368,65315,40224,16142,16142,65315,40224,65315,4368,65315,0,0,0,0,0,4112,4368,46616,24327,40224,65315,40224,14360,4368,4368,0,0,0,0,0,24327,4368,4368,65315,65315,14360,24327,65315,65315,4368,0,0,0,0,0,2568,4368,65315,4368,4368,4368,4368,4368,4368,0,4368,0,0,0,0,0,0,2056,4368,65315,4368,4368,0,65315,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
};
const uint16_t poof1[]=
{
	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,65315,4368,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4368,4368,4368,65315,65315,65315,4368,4368,0,0,0,0,0,0,0,0,0,0,4368,4368,4368,40224,40224,4368,65315,65315,40224,4368,40224,4368,0,0,0,0,0,0,0,0,40224,65315,65315,40224,40224,40224,40224,40224,40224,4368,4368,4368,0,0,0,0,0,0,0,4368,65315,65315,65315,40224,65315,40224,65315,65315,40224,40224,40224,4368,4368,0,0,0,0,0,40224,40224,4368,4368,40224,65315,65315,65315,65315,65315,40224,40224,40224,4368,4368,4368,0,0,4368,40224,40224,4368,4368,40224,40224,65315,16142,24327,16142,16142,16142,65315,65315,4368,40224,4368,0,0,0,4368,4368,4368,40224,40224,65315,16142,65315,16142,24327,16142,65315,65315,65315,40224,40224,4368,0,0,4368,40224,40224,40224,65315,16142,16142,16142,16142,24327,16142,24327,16142,65315,65315,40224,4368,4368,0,0,4368,4368,40224,40224,65315,16142,24327,24327,16142,24327,24327,16142,24327,40224,40224,40224,40224,4368,0,0,4368,4368,4368,40224,65315,16142,40224,65315,16142,16142,65315,16142,65315,65315,40224,40224,65315,4368,0,0,4368,40224,40224,40224,65315,65315,16142,24327,65315,16142,16142,65315,65315,40224,40224,40224,65315,4368,0,0,0,4368,40224,40224,40224,4368,40224,40224,40224,40224,40224,65315,40224,40224,40224,4368,65315,65315,0,0,0,0,4368,40224,4368,65315,65315,65315,65315,40224,40224,40224,40224,40224,40224,40224,65315,4368,0,0,0,4368,40224,40224,40224,4368,65315,40224,40224,4368,4368,40224,40224,40224,40224,4368,0,4368,0,0,0,4368,4368,40224,40224,4368,4368,4368,40224,40224,4368,4368,4368,40224,4368,4368,0,0,0,0,0,0,0,0,0,4368,4368,40224,4368,40224,4368,4368,4368,4368,4368,0,0,0,0,0,0,0,0,0,0,0,0,4368,4368,4368,0,0,4368,4368,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
};
const uint16_t poof2[]=
{
	528,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,768,0,0,1544,4368,4368,4368,4368,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1544,4368,4368,4368,4368,4368,4368,40224,4368,4368,4368,0,4368,4368,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4368,59144,4368,4368,4368,4368,4368,4368,40224,4368,4368,4368,4368,4368,4368,4368,4368,4368,0,0,528,0,0,0,0,0,0,0,0,4368,4368,4368,4368,4368,40224,40224,40224,40224,40224,4368,40224,40224,4368,40224,40224,40224,4368,4368,4368,4368,0,0,0,0,0,0,0,0,4368,40224,4368,4368,4368,40224,40224,40224,40224,40224,40224,40224,40224,40224,40224,40224,40224,40224,4368,4368,4368,4368,0,0,0,0,0,0,0,0,4368,4368,4368,4368,40224,40224,40224,65315,40224,40224,40224,40224,40224,65315,65315,40224,40224,40224,40224,4368,40224,4368,0,0,0,0,0,0,0,4368,4368,4368,4368,40224,40224,40224,40224,65315,40224,40224,40224,40224,40224,40224,40224,40224,40224,40224,40224,40224,4368,40224,4368,0,0,0,0,0,0,4368,40224,4368,4368,40224,40224,40224,40224,65315,65315,65315,16142,65315,24327,65315,65315,40224,40224,40224,40224,40224,40224,4368,4368,4368,0,0,0,0,0,4368,4368,4368,40224,65315,40224,40224,65315,65315,65315,16142,65315,16142,24327,65315,65315,65315,24327,65315,40224,40224,40224,40224,4368,4368,0,0,0,0,0,4368,4368,4368,40224,40224,40224,40224,65315,24327,65315,24327,24327,24327,24327,24327,65315,65315,24327,65315,40224,40224,40224,4368,4368,4368,0,0,0,0,0,4368,4368,4368,40224,40224,65315,65315,65315,65315,24327,24327,16142,24327,16142,24327,24327,65315,65315,65315,65315,40224,40224,4368,4368,40224,0,0,0,0,4368,4368,40224,4368,40224,40224,40224,65315,65315,24327,24327,24327,24327,24327,16142,24327,24327,65315,65315,65315,65315,4368,40224,4368,4368,40224,0,0,0,0,65315,4368,40224,4368,40224,65315,65315,65315,65315,24327,16142,16142,16142,16142,24327,24327,24327,65315,24327,65315,65315,4368,40224,4368,4368,4368,0,0,0,0,0,4368,4368,40224,40224,40224,65315,65315,65315,24327,16142,16142,16142,16142,24327,16142,24327,65315,65315,65315,40224,40224,40224,40224,40224,4368,0,0,0,0,4368,4368,4368,40224,40224,65315,65315,65315,65315,24327,24327,16142,16142,16142,24327,24327,24327,65315,65315,65315,40224,40224,40224,40224,4368,0,0,0,0,0,4368,4368,4368,4368,40224,40224,40224,65315,24327,24327,24327,24327,16142,16142,24327,65315,24327,65315,65315,40224,40224,40224,40224,4368,4368,0,0,0,0,0,4368,4368,4368,4368,65315,40224,65315,65315,65315,65315,16142,24327,16142,24327,24327,24327,65315,65315,65315,65315,40224,40224,40224,40224,4368,0,0,0,0,0,0,4368,4368,4368,40224,65315,40224,65315,65315,65315,65315,24327,16142,24327,24327,65315,65315,65315,65315,4368,40224,40224,4368,40224,4368,0,0,0,0,0,0,4368,40224,4368,40224,40224,40224,40224,40224,65315,65315,24327,65315,24327,24327,65315,40224,40224,65315,40224,40224,40224,4368,4368,4368,0,0,0,0,0,0,4368,4368,40224,4368,40224,40224,40224,40224,40224,65315,24327,65315,65315,65315,40224,65315,65315,40224,40224,4368,4368,4368,4368,4368,0,0,0,0,0,0,4368,4368,4368,4368,4368,40224,40224,65315,40224,65315,65315,65315,65315,40224,40224,40224,65315,40224,40224,40224,4368,4368,4368,0,0,0,0,0,0,0,17953,4368,4368,4368,4368,4368,40224,4368,40224,40224,40224,40224,40224,40224,40224,40224,40224,4368,4368,4368,4368,40224,4368,0,0,0,0,0,0,0,0,4368,4368,40224,40224,4368,4368,40224,40224,65315,4368,40224,40224,4368,4368,4368,40224,4368,4368,40224,4368,0,0,0,0,0,0,0,0,0,0,0,0,4368,4368,4368,40224,4368,4368,4368,40224,4368,4368,4368,40224,4368,40224,4368,0,4368,0,0,0,0,0,0,0,0,0,0,0,0,0,4368,4368,4368,4368,4368,40224,4368,4368,4368,4368,4368,4368,4368,0,4368,4368,4368,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4368,4368,4368,0,4368,4368,4368,256,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
};
const uint16_t poof3[]=
{
	0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4368,0,1024,3600,4368,4368,4368,4368,3600,1544,0,4368,4368,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1024,4368,4368,4368,4368,4368,4368,4368,4368,4368,4112,4368,4368,3600,3600,1544,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4368,0,0,1024,3600,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,40224,4368,4112,4112,4368,4368,4112,1544,4368,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4368,0,3856,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,4112,1544,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4368,0,1024,4368,3856,4368,4368,4368,4368,4368,4368,40224,40224,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,2056,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4368,4112,4368,4368,4368,4368,4368,4368,40224,40224,4368,40224,4368,4368,40224,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,1544,0,4368,0,0,0,0,0,0,0,0,4368,4368,3856,4368,4368,4368,4368,40224,4368,40224,40224,4368,4368,29976,4368,40224,40224,4368,40224,65315,30232,65315,4368,4368,4368,4368,4368,4368,4368,4112,0,0,0,0,0,0,0,0,0,0,4368,4368,4368,4368,4368,40224,4368,4368,4368,4368,4368,29976,40224,16142,40224,40224,4368,4368,40224,65315,65315,65315,65315,29976,4368,4368,4368,4368,4368,4368,4368,0,0,0,0,0,0,0,0,1024,3600,4368,4368,4368,4368,65315,4368,4368,4368,37648,40224,40224,40224,40224,40224,40224,40224,40224,40224,4368,4368,4368,4368,65315,40224,4368,4368,4368,4368,4112,1544,0,0,0,0,0,0,0,0,3856,4368,4368,4368,4368,4368,4368,40224,5144,31776,40224,40224,40224,65315,48416,40224,40224,65315,40224,40224,40224,40224,40224,40224,4368,65315,65315,4368,4368,4368,4368,4368,0,0,0,0,0,0,0,1544,4368,4368,4368,4368,65315,65315,40224,65315,40224,16142,40224,40224,40224,7713,65315,65315,65315,32547,15906,40224,65315,40224,40224,4368,4368,40224,29976,4368,4368,4368,4368,4368,4368,0,0,0,0,0,0,3856,4368,4368,4368,4368,4368,65315,23584,40224,40224,65315,65315,7713,57123,65315,40224,65315,65315,65315,65315,32547,15906,40224,40224,40224,40224,40224,32032,4368,4368,4368,4368,4368,4368,0,0,0,0,0,0,4368,4368,4368,4368,40224,4368,40224,65315,40224,40224,40224,40482,57123,65315,65315,24327,65315,24327,65315,65315,40224,40739,15906,40224,40224,40224,40224,40224,40224,4368,4368,4368,4368,1544,4368,0,0,0,0,0,4368,4368,4368,4368,65315,30232,40224,40224,40224,40224,40482,65315,24327,24327,24327,40711,24327,40711,24349,65315,65315,65315,40224,15906,40224,65315,40224,40224,46616,4368,4368,4368,4368,4112,4368,0,0,0,0,0,4368,4368,4368,4368,4368,15392,40224,40224,40224,7713,65315,65315,24327,65308,32519,24327,24327,24327,57095,48917,65315,24327,65315,40224,40224,16142,40224,40224,32032,4368,4368,4368,4368,4368,0,0,0,0,0,0,4112,4368,4368,65315,65315,40224,40224,40224,40224,57123,40224,65315,65308,32519,24327,24327,16142,24327,16142,24327,7957,65315,24327,65315,65315,65315,40224,16142,40224,4368,4368,4368,4368,4368,0,0,0,0,0,0,2824,4368,4368,40224,30232,40224,40224,40224,65315,65315,40224,65315,65287,24327,24327,16142,16142,16142,24327,24327,24327,40725,65315,65315,57123,40224,16142,16142,40224,4368,4368,4368,4368,4368,0,0,0,0,4368,4368,3856,4368,4368,65315,15392,40224,40224,16142,40224,40224,65315,65315,16142,24327,16142,24327,16142,24327,16142,16142,24327,57095,24327,65315,40224,64800,40224,40224,40224,4368,65315,4368,4368,4368,0,0,0,0,0,4368,4368,4368,40224,40224,40224,40224,40224,40224,40224,65315,65315,24327,16142,24327,16142,16142,16142,24327,16142,24327,24327,24327,65315,65315,65315,65315,40224,40224,40224,4368,4368,4368,4368,4368,0,0,0,0,0,4368,4368,4368,4368,40224,40224,40224,40224,16142,40224,65315,24327,65315,24327,16142,16142,24327,16142,16142,16142,16142,16142,24327,65315,65315,65315,40224,40224,40224,22808,4368,4368,4368,4368,3088,0,0,0,0,0,0,4368,4368,4368,4368,65315,40224,40224,40224,65315,40739,65315,65315,57095,24327,16142,24327,16142,24327,24327,24327,24327,40726,24327,65315,40224,40224,40224,16142,12560,4368,65315,4368,4368,4112,0,0,0,0,0,0,4112,4368,4368,4368,40224,40224,40224,40224,40224,32290,65315,65315,7958,24327,24327,24327,16142,16142,24327,24327,40726,65315,65315,65315,64800,40224,40224,40224,4368,4368,65315,4368,4368,4368,4368,0,0,0,0,0,3856,40224,40224,4368,32032,65315,40224,40224,40224,64800,16163,40224,32548,65294,24327,24327,24327,24327,24327,40726,65315,24327,65315,48673,40224,65315,40224,40224,4368,65315,65315,4368,4368,4368,4368,0,0,0,0,4368,4368,4368,4368,4368,40224,40224,16142,40224,40224,65315,64800,40224,24327,65315,65315,24327,24327,24356,65315,65315,65315,65315,65315,40224,40224,40224,40224,40224,4368,4368,4368,4368,4368,2824,0,0,0,0,0,4368,4368,4368,4368,4368,40224,6168,40224,40224,40224,40224,65315,40224,40739,65315,24327,24327,24327,24327,65315,24327,65315,65315,57122,65315,40224,40224,16142,14360,4368,65315,4368,4368,3080,4368,0,4368,0,0,0,4368,4112,4368,4368,4368,4368,12560,65315,40224,40224,40224,65315,40224,40224,32290,65315,65315,65315,65315,65315,65315,48930,64800,40224,40224,40224,40224,65315,4368,4368,65315,4368,4368,0,0,0,0,0,0,0,0,2056,4368,4368,4368,40224,4368,65315,65315,65315,40224,40224,65315,40224,40224,40224,65315,40224,65315,40224,40224,65315,65315,40224,65315,40224,65315,4368,40224,4368,4368,4368,4368,4368,0,0,0,0,0,0,0,4368,4368,4368,4368,4368,4368,46616,40224,40224,65315,40224,40224,40224,40224,40224,40224,40224,40224,65315,40224,40224,40224,40224,40224,40224,12560,4368,4368,4368,4368,4368,4368,0,0,0,0,0,0,0,4368,4368,4368,4112,4368,4368,4368,40224,12560,22552,40224,40224,40224,16142,65315,40224,65315,65315,40224,40224,40224,40224,40224,40224,65315,14360,16142,4368,4368,4368,4368,4368,3600,0,0,0,0,0,0,0,0,0,0,2312,4368,4368,4368,4368,4368,4368,4368,4368,46616,40224,40224,40224,40224,40224,40224,40224,40224,40224,16142,40224,40224,65315,4368,4368,4368,4368,4368,4368,0,0,0,0,0,0,0,0,0,0,0,4368,4368,4368,4368,4368,40224,4368,40224,4368,4368,65315,40224,40224,40224,40224,40224,22808,12560,65315,40224,40224,4368,40224,4368,4368,4368,4368,4368,3600,0,0,0,0,0,0,0,0,0,0,0,4368,0,2056,4368,4368,4368,4368,4368,4368,4368,4368,40224,40224,4368,65315,65315,65315,4368,40224,4368,4368,4368,4368,4368,4368,4368,4368,4368,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4368,4368,4368,4368,4368,4368,4368,4368,40224,4368,4368,40224,65315,4368,40224,4368,4368,4368,4368,4368,4368,4368,4368,2824,0,0,0,0,0,0,0,0,0,0,0,0,0,4368,4368,0,0,0,3080,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,0,4368,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4368,4368,0,2056,4368,4368,4368,4368,4368,4368,4368,4368,4368,4112,4368,4368,4368,4368,4368,4368,4368,4368,2568,4368,4368,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4368,0,0,4368,4368,4368,4368,0,3080,3344,0,2056,4368,4368,2824,0,0,0,4368,0,4368,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,4368,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,
};
// Explosion Sprites
const uint16_t poofgreen0[]=
{
	32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,65315,1024,3088,1544,32776,32776,32776,32776,32776,32776,32776,32776,32776,1024,65315,5144,47648,29976,4368,2568,2056,32776,32776,32776,32776,32776,32776,24327,4112,4368,65315,40224,24327,65315,4368,65315,1280,2056,32776,32776,32776,32776,3856,4368,65315,40224,40224,65315,65315,29976,4368,3344,4368,32776,32776,32776,32776,4368,4368,65315,40224,16142,16142,16142,32032,65315,24327,32776,32776,32776,32776,32776,4112,4368,32032,16142,24327,16142,24327,40224,32032,4368,32776,32776,32776,32776,32776,2056,4368,65315,40224,16142,16142,65315,40224,65315,4368,65315,32776,32776,32776,32776,32776,4112,4368,46616,24327,40224,65315,40224,14360,4368,4368,32776,32776,32776,32776,32776,24327,4368,4368,65315,65315,14360,24327,65315,65315,4368,32776,32776,32776,32776,32776,2568,4368,65315,4368,4368,4368,4368,4368,4368,32776,4368,32776,32776,32776,32776,32776,32776,2056,4368,65315,4368,4368,32776,65315,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,
};
const uint16_t poofgreen1[]=
{
	32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,65315,4368,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,4368,4368,4368,65315,65315,65315,4368,4368,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,4368,4368,4368,40224,40224,4368,65315,65315,40224,4368,40224,4368,32776,32776,32776,32776,32776,32776,32776,32776,40224,65315,65315,40224,40224,40224,40224,40224,40224,4368,4368,4368,32776,32776,32776,32776,32776,32776,32776,4368,65315,65315,65315,40224,65315,40224,65315,65315,40224,40224,40224,4368,4368,32776,32776,32776,32776,32776,40224,40224,4368,4368,40224,65315,65315,65315,65315,65315,40224,40224,40224,4368,4368,4368,32776,32776,4368,40224,40224,4368,4368,40224,40224,65315,16142,24327,16142,16142,16142,65315,65315,4368,40224,4368,32776,32776,32776,4368,4368,4368,40224,40224,65315,16142,65315,16142,24327,16142,65315,65315,65315,40224,40224,4368,32776,32776,4368,40224,40224,40224,65315,16142,16142,16142,16142,24327,16142,24327,16142,65315,65315,40224,4368,4368,32776,32776,4368,4368,40224,40224,65315,16142,24327,24327,16142,24327,24327,16142,24327,40224,40224,40224,40224,4368,32776,32776,4368,4368,4368,40224,65315,16142,40224,65315,16142,16142,65315,16142,65315,65315,40224,40224,65315,4368,32776,32776,4368,40224,40224,40224,65315,65315,16142,24327,65315,16142,16142,65315,65315,40224,40224,40224,65315,4368,32776,32776,32776,4368,40224,40224,40224,4368,40224,40224,40224,40224,40224,65315,40224,40224,40224,4368,65315,65315,32776,32776,32776,32776,4368,40224,4368,65315,65315,65315,65315,40224,40224,40224,40224,40224,40224,40224,65315,4368,32776,32776,32776,4368,40224,40224,40224,4368,65315,40224,40224,4368,4368,40224,40224,40224,40224,4368,32776,4368,32776,32776,32776,4368,4368,40224,40224,4368,4368,4368,40224,40224,4368,4368,4368,40224,4368,4368,32776,32776,32776,32776,32776,32776,32776,32776,32776,4368,4368,40224,4368,40224,4368,4368,4368,4368,4368,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,4368,4368,4368,32776,32776,4368,4368,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,
};
const uint16_t poofgreen2[]=
{
	32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,1544,4368,4368,4368,4368,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,1544,4368,4368,4368,4368,4368,4368,40224,4368,4368,4368,32776,4368,4368,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,4368,59144,4368,4368,4368,4368,4368,4368,40224,4368,4368,4368,4368,4368,4368,4368,4368,4368,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,4368,4368,4368,4368,4368,40224,40224,40224,40224,40224,4368,40224,40224,4368,40224,40224,40224,4368,4368,4368,4368,32776,32776,32776,32776,32776,32776,32776,32776,4368,40224,4368,4368,4368,40224,40224,40224,40224,40224,40224,40224,40224,40224,40224,40224,40224,40224,4368,4368,4368,4368,32776,32776,32776,32776,32776,32776,32776,32776,4368,4368,4368,4368,40224,40224,40224,65315,40224,40224,40224,40224,40224,65315,65315,40224,40224,40224,40224,4368,40224,4368,32776,32776,32776,32776,32776,32776,32776,4368,4368,4368,4368,40224,40224,40224,40224,65315,40224,40224,40224,40224,40224,40224,40224,40224,40224,40224,40224,40224,4368,40224,4368,32776,32776,32776,32776,32776,32776,4368,40224,4368,4368,40224,40224,40224,40224,65315,65315,65315,16142,65315,24327,65315,65315,40224,40224,40224,40224,40224,40224,4368,4368,4368,32776,32776,32776,32776,32776,4368,4368,4368,40224,65315,40224,40224,65315,65315,65315,16142,65315,16142,24327,65315,65315,65315,24327,65315,40224,40224,40224,40224,4368,4368,32776,32776,32776,32776,32776,4368,4368,4368,40224,40224,40224,40224,65315,24327,65315,24327,24327,24327,24327,24327,65315,65315,24327,65315,40224,40224,40224,4368,4368,4368,32776,32776,32776,32776,32776,4368,4368,4368,40224,40224,65315,65315,65315,65315,24327,24327,16142,24327,16142,24327,24327,65315,65315,65315,65315,40224,40224,4368,4368,40224,32776,32776,32776,32776,4368,4368,40224,4368,40224,40224,40224,65315,65315,24327,24327,24327,24327,24327,16142,24327,24327,65315,65315,65315,65315,4368,40224,4368,4368,40224,32776,32776,32776,32776,65315,4368,40224,4368,40224,65315,65315,65315,65315,24327,16142,16142,16142,16142,24327,24327,24327,65315,24327,65315,65315,4368,40224,4368,4368,4368,32776,32776,32776,32776,32776,4368,4368,40224,40224,40224,65315,65315,65315,24327,16142,16142,16142,16142,24327,16142,24327,65315,65315,65315,40224,40224,40224,40224,40224,4368,32776,32776,32776,32776,4368,4368,4368,40224,40224,65315,65315,65315,65315,24327,24327,16142,16142,16142,24327,24327,24327,65315,65315,65315,40224,40224,40224,40224,4368,32776,32776,32776,32776,32776,4368,4368,4368,4368,40224,40224,40224,65315,24327,24327,24327,24327,16142,16142,24327,65315,24327,65315,65315,40224,40224,40224,40224,4368,4368,32776,32776,32776,32776,32776,4368,4368,4368,4368,65315,40224,65315,65315,65315,65315,16142,24327,16142,24327,24327,24327,65315,65315,65315,65315,40224,40224,40224,40224,4368,32776,32776,32776,32776,32776,32776,4368,4368,4368,40224,65315,40224,65315,65315,65315,65315,24327,16142,24327,24327,65315,65315,65315,65315,4368,40224,40224,4368,40224,4368,32776,32776,32776,32776,32776,32776,4368,40224,4368,40224,40224,40224,40224,40224,65315,65315,24327,65315,24327,24327,65315,40224,40224,65315,40224,40224,40224,4368,4368,4368,32776,32776,32776,32776,32776,32776,4368,4368,40224,4368,40224,40224,40224,40224,40224,65315,24327,65315,65315,65315,40224,65315,65315,40224,40224,4368,4368,4368,4368,4368,32776,32776,32776,32776,32776,32776,4368,4368,4368,4368,4368,40224,40224,65315,40224,65315,65315,65315,65315,40224,40224,40224,65315,40224,40224,40224,4368,4368,4368,32776,32776,32776,32776,32776,32776,32776,32776,4368,4368,4368,4368,4368,40224,4368,40224,40224,40224,40224,40224,40224,40224,40224,40224,4368,4368,4368,4368,40224,4368,32776,32776,32776,32776,32776,32776,32776,32776,4368,4368,40224,40224,4368,4368,40224,40224,65315,4368,40224,40224,4368,4368,4368,40224,4368,4368,40224,4368,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,4368,4368,4368,40224,4368,4368,4368,40224,4368,4368,4368,40224,4368,40224,4368,32776,4368,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,4368,4368,4368,4368,4368,40224,4368,4368,4368,4368,4368,4368,4368,32776,4368,4368,4368,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,4368,4368,4368,32776,4368,4368,4368,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,
};
const uint16_t poofgreen3[]=
{
	32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,4368,32776,1024,3600,4368,4368,4368,4368,3600,1544,32776,4368,4368,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,1024,4368,4368,4368,4368,4368,4368,4368,4368,4368,4112,4368,4368,3600,3600,1544,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,4368,32776,32776,1024,3600,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,40224,4368,4112,4112,4368,4368,4112,1544,4368,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,4368,32776,3856,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,4112,1544,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,4368,32776,1024,4368,3856,4368,4368,4368,4368,4368,4368,40224,40224,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,2056,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,4368,4112,4368,4368,4368,4368,4368,4368,40224,40224,4368,40224,4368,4368,40224,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,1544,32776,4368,32776,32776,32776,32776,32776,32776,32776,32776,4368,4368,3856,4368,4368,4368,4368,40224,4368,40224,40224,4368,4368,29976,4368,40224,40224,4368,40224,65315,30232,65315,4368,4368,4368,4368,4368,4368,4368,4112,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,4368,4368,4368,4368,4368,40224,4368,4368,4368,4368,4368,29976,40224,16142,40224,40224,4368,4368,40224,65315,65315,65315,65315,29976,4368,4368,4368,4368,4368,4368,4368,32776,32776,32776,32776,32776,32776,32776,32776,1024,3600,4368,4368,4368,4368,65315,4368,4368,4368,37648,40224,40224,40224,40224,40224,40224,40224,40224,40224,4368,4368,4368,4368,65315,40224,4368,4368,4368,4368,4112,1544,32776,32776,32776,32776,32776,32776,32776,32776,3856,4368,4368,4368,4368,4368,4368,40224,5144,31776,40224,40224,40224,65315,48416,40224,40224,65315,40224,40224,40224,40224,40224,40224,4368,65315,65315,4368,4368,4368,4368,4368,32776,32776,32776,32776,32776,32776,32776,32776,4368,4368,4368,4368,65315,65315,40224,65315,40224,16142,40224,40224,40224,7713,65315,65315,65315,32547,15906,40224,65315,40224,40224,4368,4368,40224,29976,4368,4368,4368,4368,4368,4368,32776,32776,32776,32776,32776,32776,3856,32776,4368,4368,4368,4368,65315,23584,40224,40224,65315,65315,7713,57123,65315,40224,65315,65315,65315,65315,32547,15906,40224,40224,40224,40224,40224,32032,4368,4368,4368,4368,4368,4368,32776,32776,32776,32776,32776,32776,32776,4368,4368,4368,40224,4368,40224,65315,40224,40224,40224,40482,57123,65315,65315,24327,65315,24327,65315,65315,40224,40739,15906,40224,40224,40224,40224,40224,40224,4368,4368,4368,4368,32776,4368,32776,32776,32776,32776,32776,4368,4368,4368,4368,65315,30232,40224,40224,40224,40224,40482,65315,24327,24327,24327,40711,24327,40711,24349,65315,65315,65315,40224,15906,40224,65315,40224,40224,46616,4368,4368,4368,4368,4112,4368,32776,32776,32776,32776,32776,4368,4368,4368,4368,4368,15392,40224,40224,40224,7713,65315,65315,24327,65308,32519,24327,24327,24327,57095,48917,65315,24327,65315,40224,40224,16142,40224,40224,32032,4368,4368,4368,4368,4368,32776,32776,32776,32776,32776,32776,4112,4368,4368,65315,65315,40224,40224,40224,40224,57123,40224,65315,65308,32519,24327,24327,16142,24327,16142,24327,7957,65315,24327,65315,65315,65315,40224,16142,40224,4368,4368,4368,4368,4368,32776,32776,32776,32776,32776,32776,2824,4368,4368,40224,30232,40224,40224,40224,65315,65315,40224,65315,65287,24327,24327,16142,16142,16142,24327,24327,24327,40725,65315,65315,57123,40224,16142,16142,40224,4368,4368,4368,4368,4368,32776,32776,32776,32776,4368,4368,3856,4368,4368,65315,15392,40224,40224,16142,40224,40224,65315,65315,16142,24327,16142,24327,16142,24327,16142,16142,24327,57095,24327,65315,40224,64800,40224,40224,40224,4368,65315,4368,4368,4368,32776,32776,32776,32776,32776,4368,4368,4368,40224,40224,40224,40224,40224,40224,40224,65315,65315,24327,16142,24327,16142,16142,16142,24327,16142,24327,24327,24327,65315,65315,65315,65315,40224,40224,40224,4368,4368,4368,4368,4368,32776,32776,32776,32776,32776,4368,32776,4368,4368,40224,40224,40224,40224,16142,40224,65315,24327,65315,24327,16142,16142,24327,16142,16142,16142,16142,16142,24327,65315,65315,65315,40224,40224,40224,22808,4368,4368,4368,4368,3088,32776,32776,32776,32776,32776,32776,32776,4368,4368,4368,65315,40224,40224,40224,65315,40739,65315,65315,57095,24327,16142,24327,16142,24327,24327,24327,24327,40726,24327,65315,40224,40224,40224,16142,12560,4368,65315,4368,4368,4112,32776,32776,32776,32776,32776,32776,4112,4368,4368,4368,40224,40224,40224,40224,40224,32290,65315,65315,7958,24327,24327,24327,16142,16142,24327,24327,40726,65315,65315,65315,64800,40224,40224,40224,4368,4368,65315,4368,4368,4368,4368,32776,32776,32776,32776,32776,32776,40224,40224,4368,32032,65315,40224,40224,40224,64800,16163,40224,32548,65294,24327,24327,24327,24327,24327,40726,65315,24327,65315,48673,40224,65315,40224,40224,4368,65315,65315,4368,4368,4368,4368,32776,32776,32776,32776,4368,4368,4368,4368,4368,40224,40224,16142,40224,40224,65315,64800,40224,24327,65315,65315,24327,24327,24356,65315,65315,65315,65315,65315,40224,40224,40224,40224,40224,4368,4368,4368,4368,4368,2824,32776,32776,32776,32776,32776,4368,4368,4368,4368,4368,40224,6168,40224,40224,40224,40224,65315,40224,40739,65315,24327,24327,24327,24327,65315,24327,65315,65315,57122,65315,40224,40224,16142,14360,4368,65315,4368,4368,3080,4368,32776,4368,32776,32776,32776,4368,32776,32776,4368,4368,4368,12560,65315,40224,40224,40224,65315,40224,40224,32290,65315,65315,65315,65315,65315,65315,48930,64800,40224,40224,40224,40224,65315,4368,4368,65315,4368,4368,32776,32776,32776,32776,32776,32776,32776,32776,32776,4368,4368,4368,40224,4368,65315,65315,65315,40224,40224,65315,40224,40224,40224,65315,40224,65315,40224,40224,65315,65315,40224,65315,40224,65315,4368,40224,4368,4368,4368,4368,4368,32776,32776,32776,32776,32776,32776,32776,4368,32776,4368,4368,4368,4368,46616,40224,40224,65315,40224,40224,40224,40224,40224,40224,40224,40224,65315,40224,40224,40224,40224,40224,40224,12560,4368,4368,4368,4368,4368,4368,32776,32776,32776,32776,32776,32776,32776,4368,4368,4368,4112,4368,4368,4368,40224,12560,22552,40224,40224,40224,16142,65315,40224,65315,65315,40224,40224,40224,40224,40224,40224,65315,14360,16142,4368,4368,4368,4368,4368,3600,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,2312,4368,4368,4368,4368,4368,4368,4368,4368,46616,40224,40224,40224,40224,40224,40224,40224,40224,40224,16142,40224,40224,65315,4368,4368,4368,4368,4368,4368,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,4368,32776,4368,4368,4368,40224,4368,40224,4368,4368,65315,40224,40224,40224,40224,40224,22808,12560,65315,40224,40224,4368,40224,4368,4368,4368,4368,4368,3600,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,4368,32776,2056,4368,4368,4368,4368,4368,4368,4368,4368,40224,40224,4368,65315,65315,65315,4368,40224,4368,4368,4368,4368,4368,4368,4368,4368,4368,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,4368,4368,4368,4368,4368,4368,4368,4368,40224,4368,4368,40224,65315,4368,40224,4368,4368,4368,4368,4368,4368,4368,4368,2824,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,4368,4368,32776,32776,32776,3080,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,4368,32776,4368,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,4368,4368,32776,2056,4368,4368,4368,4368,4368,4368,4368,4368,4368,4112,4368,4368,4368,4368,4368,4368,4368,4368,2568,4368,4368,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,4368,32776,32776,4368,4368,4368,4368,32776,3080,3344,32776,2056,4368,4368,2824,32776,32776,32776,4368,32776,4368,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,4368,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,32776,
};

// First sound Idea
//uint32_t tune1_notes[] = {GS4_Ab4,G4,GS5_Ab5,C4,DS4_Eb4,0,G4,GS4_Ab4,F4,0,F4,F4,G4,GS4_Ab4,AS4_Bb4,G4,F4,F4,G4,G4,0,C5,C5,0,F4,GS4_Ab4,0,GS4_Ab4,AS4_Bb4,0,GS4_Ab4,G4,F4,0,F4,DS5_Eb5,C5,CS5_Db5,C5,AS4_Bb4,0};
//uint32_t tune1_times[] = {250,1750,250,750,2500,500,250,750,1500,750,750,250,750,250,1000,250,500,250,1000,1750,250,1250,500,250,500,1500,250,1000,334,333,333,500,500,250,750,3000,250,500,1250,500};

uint32_t level1_notes[] = {F4,D4,0,C4,D4,F4,A4,A4,A4,A4,G4,G4,AS4_Bb4,0,G4,DS4_Eb4,0,D4,AS3_Bb3,D4,C4,0,F4,D4,0,C4,D4,F4,A4,G4,0,G4,A4,G4,0,G4,AS4_Bb4,0,AS4_Bb4,AS4_Bb4,0,AS4_Bb4,AS4_Bb4,FS4_Gb4,F4,FS4_Gb4,F4,FS4_Gb4,F4,D4,C4,D4,FS3_Gb3,AS3_Bb3,D4,D4,D4,C4,D4,F4,D4,D4,F4,A4,G4,0,AS3_Bb3,C4,AS3_Bb3,F4,0,AS4_Bb4,G4,0,F4,G4,F4,0,D4,D4,D4,0,A3,A3,0,AS3_Bb3,0};
uint32_t level1_times[] = {500,500,834,166,334,166,500,334,166,334,500,166,500,334,166,166,334,334,166,500,500,500,500,500,834,166,334,166,334,166,450,50,334,166,334,166,166,166,166,166,166,166,334,166,334,166,500,500,500,334,166,334,500,166,334,166,334,166,500,500,500,334,166,334,166,834,166,334,166,500,1000,500,1000,334,166,334,166,666,166,166,166,166,166,166,166,666,1000};


uint32_t sound_win[] = {C5,F4,C5,D5};
uint32_t win_times[] = {300,300,300,1200};

//Johns maze:
int level1xv[] =    {66,109,88,44,109,21,44,88,66,88,44,21}; // x1
int level1yv[] =    {0,0,44,21,44,66,66,66,89,110,110,134}; // y1
int level1lenv[] = {66,21,45,24,25,23,23,23,45,50,24,26}; // y2 - y1

int level1xh[] = {0,21,88,109,0,44,66,0,44,88,66,109}; // x1
int level1yh[] = {21,45,21,66,66,66,89,110,110,110,134,134}; // y1
int level1lenh[] = {21,45,21,21,21,22,43,21,22,21,22,21}; // x2-x1

//Cillians maze:
int level2xv[] =    {20,41,40,85,61,104,0,0}; // top left x coord
int level2lenv[] = {138,20,50,24,29,27,0,0}; // higher y value - lower y value
int level2yv[] =    {22,43,87,63,108,130,0,0}; // top left y coord

int level2xh[] ={20,126,126,125,83,20,40,64}; //x1
int level2yh[] ={22,43,83,108,130,107,87,63}; //y1
int level2lenh[] ={87,85,21,64,21,21,45,40}; // x2-x1


/*
	Sample: 

	drawLine(0,21,21,21,0);

	0 (first parameter) will map to first element of linxh[] function as it is x1
	21 (second parameter) will map to first element of level1yh[] function as it is y1
	lastly the corresponding value in the last function is of the formula: x2 - x1,
	in this example it is 21 (third parameter) - 0 (first parameter) = 21 which goes 
	into the last function in the same index as you put your other values

	IMPORTANT: the function drawLine(0,21,21,21,0); format is IMPORTANT, the first two 
	values (x1 and y1) must be the points CLOSEST TO THE TOP LEFT CORNER i.e. their values
	should be equal to or less than the second set of values in this example, (0,21) is equal
	to or less than (21,21) thus you can use the template above, if your drawline functions 
	are different to this layout the above WILL NOT WORK, either you must rearrange your 
	original drawline functions to match the above template or reshuffle where you pass
	each parameter.

	NOTE: THIS TEMPLATE IS ONLY FOR THE HORIZONTAL LINE FUNCTIONS, VERTICAL LINES BEHAVE DIFFERENTLY


*/

// For background music
uint32_t *notes;
uint32_t *note_times;
int tune_length = 87;
int tune_playing = 1;
int tune_index = 0;
int tune_time_remaining = 0;
int tune_repeat = 0;
typedef struct {
	int x,y,h,w;
	uint16_t colour;
} line_segment;
#define MAZE1_SIZE 2
line_segment maze1[]={ {1,2,3,4,5}, {6,7,8,9,10}};

void drawMaze1()
{
	for (int i=0;i < MAZE1_SIZE;i++)
	{
		drawLine(maze1[i].x,maze1[i].y,maze1[i].w,maze1[i].h,maze1[i].colour);
	}
}
int main()
{
	int hinverted = 0;
	int vinverted = 0;
	int toggle = 0; // For movements (change between sprites)
	int hmoved = 0;
	int vmoved = 0;
	// Variables to show whether the player has passed each level
	int level = 1;

	// Variable to set each level
	int levelSet = 1;


	uint16_t x = 0;
	uint16_t y = 0;
	uint16_t oldx = x;
	uint16_t oldy = y;
	initClock();
	initSerial();
	initSysTick();
	setupIO();
	initSound();
	main_menu();

	while(1)
	{
		// Code for showing main menu
		// main_menu

		hmoved = vmoved = 0;
		hinverted = vinverted = 0;

		// If on level 1
		if (level == 1)
		{
			if (levelSet == 1)
			{
				// Call Function to start Level 1 (grass maze)
				maze_level1();

				// Play Level 1 music 
				playTune(level1_notes,level1_times,tune_length,0);

				victoryFlash();

				lightOneOn();
	
				// Prepare levelSet for next level
				levelSet++;

			}
			

			if (isInside(113,144,16,16,x,y) || isInside(113,144,16,16,x+16,y) || isInside(113,144,16,16,x,y+16) || isInside(113,144,16,16,x+16,y+16)) 
			{
				// Play Win Sound 
				playTune(sound_win,win_times,4,0);

				// Play Zero Note
				playTune(0,0,100,0);
		
				level1_pass(oldx,oldy);

				x = 2;
				y = 144;

				level++;
			}
		} // End if

		// If on level 2
		if (level == 2)
		{
			if (levelSet == 2)
			{
				// Call Function to start Level 2 (snow maze)
				maze_level2();

				// Play Level 2 music 
				playTune(0,0,100,0);
	
				// Prepare levelSet for next level
				levelSet++;
			}

			if (isInside(62,58,16,16,x,y) || isInside(62,58,16,16,x+16,y) || isInside(62,58,16,16,x,y+16) || isInside(62,58,16,16,x+16,y+16)) 
			{
				// Play Win Sound 
				playTune(sound_win,win_times,4,0);

				// Play Zero Note
				playTune(0,0,100,0);
		
				level2_pass(oldx,oldy);

				x = 2;
				y = 144;

				level++;
			}
			
		} // End If

		// If on level 3
		if (level == 3)
		{
			if (levelSet == 3)
			{
				// Call Function to start Level 3 (bog maze)
				maze_level2();

				// Play Level 3 music 
				playTune(0,0,100,0);
	
				// Prepare levelSet for next level
				levelSet++;
			}

			if (isInside(106,139,16,16,x,y) || isInside(106,139,16,16,x+16,y) || isInside(106,139,16,16,x,y+16) || isInside(106,139,16,16,x+16,y+16)) 
			{
				// Play Win Sound 
				playTune(sound_win,win_times,4,0);

				// Play Zero Note
				playTune(0,0,100,0);
		
				level3_pass(oldx,oldy);

				level++;
			}
		} // End If

		// Movement Code
		if ((GPIOB->IDR & (1 << 4))==0) // right pressed
		{					
			if (x < 112)
			{
				x = x + 1;
				hmoved = 1;
				hinverted=0;
			}						
		}
		if ((GPIOB->IDR & (1 << 5))==0) // left pressed
		{			
			if (y < 144)
			{
				y = y + 1;			
				vmoved = 1;
				vinverted = 0;
			}				
		}
		if ((GPIOA->IDR & (1 << 11)) == 0) // down pressed // down pressed
		{
			
			if (y > 0)
			{
				y = y - 1;
				vmoved = 1;
				vinverted = 1;
			}
		}
		if ( (GPIOA->IDR & (1 << 8)) == 0) // up pressed
		{			
			if (x > 0)
			{
				x = x - 1;
				hmoved = 1;
				hinverted=1;
			}
		}
		if ((vmoved) || (hmoved))
		{	
			// Collision Code
			// If on level 1
			if (level == 1)
			{
				for (int i = 0; i < 12; i++ )
				{
					if (touchingVLine(level1xv[i],level1yv[i],level1lenv[i],x,y,16,16) || touchingHLine(level1xh[i],level1yh[i],level1lenh[i],x,y,16,16))
					{
						x = oldx;
						y = oldy;
						continue;	
					}
				}
			}
			// If on level 2
			else if (level == 2)
			{
				for (int i = 0; i < 8; i++)
				{
					if(touchingVLine(level2xv[i],level2yv[i],level2lenv[i],x,y,16,16) || touchingHLine(level2xh[i],level2yh[i],level2lenh[i],x,y,16,16))
					{
						x = oldx;
						y = oldy;
						continue;
					}
				}
			}
			// If on level 3
			
			
			// only redraw if there has been some movement (reduces flicker)
			if (level == 1)
			{
				fillRectangle(oldx,oldy,16,16,RGBToWord(5,28,12));
			}
			else if (level == 2)
			{
				fillRectangle(oldx,oldy,16,16,RGBToWord(255,255,255));
			}
			else
			{
				fillRectangle(oldx,oldy,16,16,RGBToWord(120,67,21));
			}
			

			oldx = x;
			oldy = y;	

			// Horizontal movement occurs 
			if (hmoved)
			{
				// Level 1 mouse sprites
				if (level == 1)
				{
					// Change to Spite 1 of mouse (stationary)
					if (toggle == 0)
					{
						putImage(x,y,16,16,mouse1green,hinverted,0);
						toggle++;
					}
					// Change to Sprite 2 of mouse (jumping)
					else if (toggle == 1)
					{
						putImage(x,y,16,16,mouse2green,hinverted,0);
						toggle++;
					}
					// Change to Sprite 3 of mouse (landing)
					else
					{
						putImage(x,y,16,16,mouse3green,hinverted,0);
						toggle = 0;
					}
				}

				// Level 2 mouse sprites
				else if(level == 2)
				{
					// Change to Spite 1 of mouse (stationary)
					if (toggle == 0)
					{
						putImage(x,y,16,16,mouse1green,hinverted,0);
						toggle++;
					}
					// Change to Sprite 2 of mouse (jumping)
					else if (toggle == 1)
					{
						putImage(x,y,16,16,mouse2green,hinverted,0);
						toggle++;
					}
					// Change to Sprite 3 of mouse (landing)
					else
					{
						putImage(x,y,16,16,mouse3green,hinverted,0);
						toggle = 0;
					}
				}

				// Level 3 mouse sprites
				else
				{
					// Change to Spite 1 of mouse (stationary)
					if (toggle == 0)
					{
						putImage(x,y,16,16,mouse1green,hinverted,0);
						toggle++;
					}
					// Change to Sprite 2 of mouse (jumping)
					else if (toggle == 1)
					{
						putImage(x,y,16,16,mouse2green,hinverted,0);
						toggle++;
					}
					// Change to Sprite 3 of mouse (landing)
					else
					{
						putImage(x,y,16,16,mouse3green,hinverted,0);
						toggle = 0;
					}
				}
			}

			// Vertical movement occurs 
			else
			{
				// Level 1
				if (level == 1)
				{
					// Change to sprite 1 of y-axis movements
					if (toggle == 0)
					{
						putImage(x,y,16,16,mousedown1green,0,vinverted);
						toggle++;
					}
					// Change to sprite 2 of y-axis movements
					else 
					{
						putImage(x,y,16,16,mousedown2green,0,vinverted);
						toggle = 0;
					}
				}

				// Level 2
				else if (level == 2)
				{
					// Change to sprite 1 of y-axis movements
					if (toggle == 0)
					{
						putImage(x,y,16,16,mousedown1green,0,vinverted);
						toggle++;
					}
					// Change to sprite 2 of y-axis movements
					else 
					{
						putImage(x,y,16,16,mousedown2green,0,vinverted);
						toggle = 0;
					}
				}

				// Level 3
				else
				{
					// Change to sprite 1 of y-axis movements
					if (toggle == 0)
					{
						putImage(x,y,16,16,mousedown1green,0,vinverted);
						toggle++;
					}
					// Change to sprite 2 of y-axis movements
					else 
					{
						putImage(x,y,16,16,mousedown2green,0,vinverted);
						toggle = 0;
					}
				}
			}
		}
		// Slows down mouse movement
		delay(30);
	}

	return 0;
}

void initSysTick(void)
{
	SysTick->LOAD = 48000;
	SysTick->CTRL = 7;
	SysTick->VAL = 10;
	__asm(" cpsie i "); // enable interrupts
}
void SysTick_Handler(void)
{
	// Used to play music in the background
	if (tune_playing)
	{
		tune_time_remaining--;

		if (tune_time_remaining <= 0)
		{
			tune_index++;
			
			if (tune_index >= tune_length)
			{
				tune_index = 0;
			}

			tune_time_remaining = note_times[tune_index];
			playNote(notes[tune_index]);
		}
	}

	milliseconds++;
}

void initClock(void)
{
// This is potentially a dangerous function as it could
// result in a system with an invalid clock signal - result: a stuck system
        // Set the PLL up
        // First ensure PLL is disabled
        RCC->CR &= ~(1u<<24);
        while( (RCC->CR & (1 <<25))); // wait for PLL ready to be cleared
        
// Warning here: if system clock is greater than 24MHz then wait-state(s) need to be
// inserted into Flash memory interface
				
        FLASH->ACR |= (1 << 0);
        FLASH->ACR &=~((1u << 2) | (1u<<1));
        // Turn on FLASH prefetch buffer
        FLASH->ACR |= (1 << 4);
        // set PLL multiplier to 12 (yielding 48MHz)
        RCC->CFGR &= ~((1u<<21) | (1u<<20) | (1u<<19) | (1u<<18));
        RCC->CFGR |= ((1<<21) | (1<<19) ); 

        // Need to limit ADC clock to below 14MHz so will change ADC prescaler to 4
        RCC->CFGR |= (1<<14);

        // and turn the PLL back on again
        RCC->CR |= (1<<24);        
        // set PLL as system clock source 
        RCC->CFGR |= (1<<1);
}
void delay(volatile uint32_t dly)
{
	uint32_t end_time = dly + milliseconds;
	while(milliseconds != end_time)
		__asm(" wfi "); // sleep
}

void enablePullUp(GPIO_TypeDef *Port, uint32_t BitNumber)
{
	Port->PUPDR = Port->PUPDR &~(3u << BitNumber*2); // clear pull-up resistor bits
	Port->PUPDR = Port->PUPDR | (1u << BitNumber*2); // set pull-up bit
}
void pinMode(GPIO_TypeDef *Port, uint32_t BitNumber, uint32_t Mode)
{
	/*
	*/
	uint32_t mode_value = Port->MODER;
	Mode = Mode << (2 * BitNumber);
	mode_value = mode_value & ~(3u << (BitNumber * 2));
	mode_value = mode_value | Mode;
	Port->MODER = mode_value;
}
int isInside(uint16_t x1, uint16_t y1, uint16_t w, uint16_t h, uint16_t px, uint16_t py)
{
	// checks to see if point px,py is within the rectange defined by x,y,w,h
	uint16_t x2,y2;
	x2 = x1+w;
	y2 = y1+h;
	int rvalue = 0;
	if ( (px >= x1) && (px <= x2))
	{
		// ok, x constraint met
		if ( (py >= y1) && (py <= y2))
			rvalue = 1;
	}
	return rvalue;
}

void setupIO()
{
	RCC->AHBENR |= (1 << 18) + (1 << 17); // enable Ports A and B
	RCC->AHBENR |= (1 << 22); // enable Port F
	display_begin();
	pinMode(GPIOB,4,0);
	pinMode(GPIOB,5,0);
	pinMode(GPIOA,8,0);
	pinMode(GPIOA,11,0);
	pinMode(GPIOB,3,1); // Make GPIOB bit 3 an output
	pinMode(GPIOB,0,1); // Make GPIOB bit 0 an output
	pinMode(GPIOF,1,1); // Make GPIOF bit 1 an output


	enablePullUp(GPIOB,4);
	enablePullUp(GPIOB,5);
	enablePullUp(GPIOA,11);
	enablePullUp(GPIOA,8);
}

// Function to set display to level 1 (grass maze)
void maze_level1()
{
    // Set Background Colour
    fillRectangle(0,0,SCREEN_WIDTH,SCREEN_HEIGHT,RGBToWord(5,28,12));

    // Put mouse and cheese on spawn points
    putImage(0,0,16,16,mouse1green,0,0);
	putImage(113,145,15,15,cheese,0,0);

    // Set Lines for maze borders 
    // Vertical Line Set
	drawLine(66,0,66,66,0);
	drawLine(109,0,109,21,0);
	drawLine(88,44,88,89,0);
	drawLine(44,21,44,45,0);
	drawLine(109,44,109,66,0);
	drawLine(21,66,21,89,0);
	drawLine(44,66,44,89,0);
	drawLine(88,66,88,89,0);
	drawLine(66,89,66,134,0);
	drawLine(88,110,88,160,0);
	drawLine(44,110,44,134,0);
	drawLine(21,134,21,160,0);

	
    // Horizontal Line Set
	drawLine(0,21,21,21,0);
	drawLine(21,45,66,45,0);
	drawLine(88,21,109,21,0);
	drawLine(109,66,128,66,0);
	drawLine(0,66,21,66,0);
	drawLine(44,66,66,66,0);
	drawLine(66,89,109,89,0);
	drawLine(0,110,21,110,0);
	drawLine(44,110,66,110,0);
	drawLine(88,110,109,110,0);
	drawLine(66,134,88,134,0);
	drawLine(109,134,128,134,0);

} // End Function

// Function to set display to level 2 ()
void maze_level2(void)
{
	// Set Background Colour
    fillRectangle(0,0,SCREEN_WIDTH,SCREEN_HEIGHT,RGBToWord(5,28,12));

	// Put mouse and cheese on spawn points


	// Vertical lines
	drawLine(20, 157, 20, 22, 0);
	drawLine(41, 43, 41, 63, 0);
	drawLine(61, 137, 61, 108, 0);
	drawLine(104, 130, 104, 157, 0);
	drawLine(40, 136, 40, 87, 0);
	drawLine(85, 63, 85, 87, 0);

	// Horizontal lines
	drawLine(20, 22, 107, 22, 0);
	drawLine(128, 43, 41, 43, 0); 
	drawLine(128, 83, 105, 83, 0);
	drawLine(125, 108, 61, 108, 0);
	drawLine(83, 130, 104, 130, 0);
	drawLine(20, 107, 41, 107, 0);
	drawLine(40, 87, 85, 87, 0);
	drawLine(64, 63, 104, 63, 0);

} // End Function

// Function to set display to level 3 (snow maze)
void maze_level3(void)
{
	// Set Background Colour
    fillRectangle(0,0,SCREEN_WIDTH,SCREEN_HEIGHT,RGBToWord(34,20,56));

	// Vertical Line Set
	drawLine(20, 157, 20, 22, 0);
	drawLine(41, 43, 41, 63, 0); 
	drawLine(61, 137, 61, 108, 0);
	drawLine(104, 130, 104, 157, 0);
	drawLine(40, 136, 40, 87, 0);
	drawLine(85, 63, 85, 87, 0);

	// Horizontal Line Set
	drawLine(20, 22, 107, 22, 0);
	drawLine(126, 43, 41, 43, 0);
	drawLine(126, 83, 105, 83, 0);
	drawLine(125, 108, 61, 108, 0);
	drawLine(83, 130, 104, 130, 0);
	drawLine(20, 107, 41, 107, 0);
	drawLine(40, 87, 85, 87, 0);
	drawLine(64, 63, 104, 63, 0);
	
} // End Function

// Function that runs when the player is on level 1 and eats the cheese
void level1_pass(uint16_t oldx, uint16_t oldy)
{
	// Delay before explosion animation 
	playNote(0);
	delay(1000);

	// Play win sound
	for (int i = 0; i < 4; i++)
	{
		playNote(sound_win[i]);
		delay(win_times[i]);
	}

	// Stop Win Sound
	playNote(0);

	// Cover old image of mouse
	fillRectangle(oldx,oldy,16,16,RGBToWord(10,51,22));

	// Play explosion animation
	fillRectangle(86,120,44,40,RGBToWord(5,28,12));

	delay(300);

	putImage(111,145,15,15,poofgreen0,0,0);

	delay(500);

	putImage(106,140,20,20,poofgreen1,0,0);

	delay(500);

	putImage(96,130,30,30,poofgreen2,0,0);

	delay(500);

	putImage(86,120,40,40,poofgreen3,0,0);

	delay(500);

	// Show Win Screen
	fillRectangle(0,0,SCREEN_WIDTH,SCREEN_HEIGHT,0);

	printTextX2("Level 1", 25, 20, RGBToWord(0,204,0),0);

	delay(2000);
	printTextX2("COMPLETED", 11, 40, RGBToWord(255,255,0),0);

	// Show Victory Mouse on win screen
	delay(1000);

	putImage(54,80,20,24,vic_mouse0,0,0);
	delay(1250);

	putImage(54,80,20,24,vic_mouse1,0,0);
	delay(1250);

	putImage(54,80,20,24,vic_mouse2,0,0);
	delay(1250);

	putImage(54,80,20,24,vic_mouse3,0,0);

	delay(750);

	printText("z",77,70,RGBToWord(255,255,255),0);

	delay(1000);

	printText("zz",77,70,RGBToWord(255,255,255),0);

	delay(1000);

	printText("zzz",77,70,RGBToWord(255,255,255),0);

	delay(1500);

} // End Function

// Function that runs when the player is on level 2 and eats the cheese
void level2_pass(uint16_t oldx,uint16_t oldy)
{
	// Delay before explosion animation 
	playNote(0);
	delay(1000);

	// Play win sound
	for (int i = 0; i < 4; i++)
	{
		playNote(sound_win[i]);
		delay(win_times[i]);
	}

	// Stop Win Sound
	playNote(0);

	// Cover old image of mouse
	fillRectangle(oldx,oldy,16,16,RGBToWord(10,51,22));

	// Play explosion animation

	// Show Win Screen
	fillRectangle(0,0,SCREEN_WIDTH,SCREEN_HEIGHT,0);

	printTextX2("Level 2", 25, 20, RGBToWord(255,255,255),0);

	delay(2000);
	printTextX2("COMPLETED", 11, 40, RGBToWord(255,255,0),0);

	// Show Victory Mouse on win screen
	delay(1000);

	putImage(54,80,20,24,vic_mouse0,0,0);
	delay(1250);

	putImage(54,80,20,24,vic_mouse1,0,0);
	delay(1250);

	putImage(54,80,20,24,vic_mouse2,0,0);
	delay(1250);

	putImage(54,80,20,24,vic_mouse3,0,0);

	delay(750);

	printText("z",77,70,RGBToWord(255,255,255),0);

	delay(1000);

	printText("zz",77,70,RGBToWord(255,255,255),0);

	delay(1000);

	printText("zzz",77,70,RGBToWord(255,255,255),0);

} // End Function

// Function that runs when the player is on level 2 and eats the cheese
void level3_pass(uint16_t oldx, uint16_t oldy)
{
	// Delay before explosion animation 
	playNote(0);
	delay(1000);

	// Play win sound
	for (int i = 0; i < 4; i++)
	{
		playNote(sound_win[i]);
		delay(win_times[i]);
	}

	// Stop Win Sound
	playNote(0);

	// Cover old image of mouse
	fillRectangle(oldx,oldy,16,16,RGBToWord(10,51,22));

	// Play explosion animation

	// Show Win Screen
	fillRectangle(0,0,SCREEN_WIDTH,SCREEN_HEIGHT,0);

	printTextX2("Level 3", 25, 20, RGBToWord(64,36,11),0);

	delay(2000);
	printTextX2("COMPLETED", 11, 40, RGBToWord(255,255,0),0);

	// Show Victory Mouse on win screen
	delay(1000);

	putImage(54,80,20,24,vic_mouse0,0,0);
	delay(1250);

	putImage(54,80,20,24,vic_mouse1,0,0);
	delay(1250);

	putImage(54,80,20,24,vic_mouse2,0,0);
	delay(1250);

	putImage(54,80,20,24,vic_mouse3,0,0);

	delay(750);

	printText("z",77,70,RGBToWord(255,255,255),0);

	delay(1000);

	printText("zz",77,70,RGBToWord(255,255,255),0);

	delay(1000);

	printText("zzz",77,70,RGBToWord(255,255,255),0);

} // End Function

// Function to run sound in the background
void playTune(uint32_t * the_notes, uint32_t * the_times, int length, int repeat)
{
	notes = the_notes;
	tune_index = 0;
	note_times = the_times;
	tune_length = length;
	tune_repeat = repeat;
	tune_playing = 1;
	tune_time_remaining = note_times[0];
}

// Functions to turn on lights on and off
void lightOneOn()
{
	GPIOB->ODR = GPIOB->ODR | (1 << 3);
}

void lightOneOff()
{
	GPIOB->ODR = GPIOB->ODR & (0 << 3);
}

void lightTwoOn()
{
	GPIOB->ODR = GPIOB->ODR | (1 << 0);
}

void lightTwoOff()
{
	GPIOB->ODR = GPIOB->ODR & (0 << 0);
}
	

void lightThreeOn()
{
	GPIOF->ODR = GPIOF->ODR | (1 << 1); // PF1 does nothing
}

void lightThreeOff()
{
	GPIOF->ODR = GPIOF->ODR & (0 << 1); // PF1 does nothing
}

void victoryFlash()
{
	lightOneOn();
	delay(700);

	lightTwoOn();
	delay(700);

	lightThreeOn();
	delay(700);

	lightOneOff();
	lightTwoOff();
	lightThreeOff();

	delay(700);

	for (int i = 0; i < 3; i ++)
	{
		lightOneOn();
		lightTwoOn();
		lightThreeOn();

		delay(500);

		lightOneOff();
		lightTwoOff();
		lightThreeOff();

		delay(500);
	}
}

// Function to display main menu screen
void main_menu(void)
{
    do 
    {
        putImage(27,20,69,26,banner,0,0);

        printText("Press start", 25, 80, RGBToWord(37, 150, 190), 0);
        printText("to begin ->", 35, 90, RGBToWord(37, 150, 190), 0);
        printText("By", 35 , 110, RGBToWord(0xff,0xff,0), 0);
        printText("Cillian",55, 110, RGBToWord(36, 156, 20), 0);
        printText("John", 20 , 120, RGBToWord(29, 162, 219), 0);
        printText("& Justin", 55 , 120, RGBToWord(121, 17, 153), 0);        
    }
    while (startButtonPressed() == 1);

	fillRectangle(0,0,SCREEN_WIDTH,SCREEN_HEIGHT,0);
}

// Function for start button
int startButtonPressed()
{
	// Button pressed
	if ((GPIOA->IDR & (1 << 10)) == 0)
	{
		return 0;
	}
	else
	{
		return 1;
	}

}

/*

*/

/*
	To Do: 
	1. Easter Eggs
	2. Serial Port Use
	3. Escape Key = pause
*/
